{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopDefault(ex) {\n  return ex && typeof ex === 'object' && 'default' in ex ? ex['default'] : ex;\n}\n\nvar React = require('react');\n\nvar logging = require('@optimizely/js-sdk-logging');\n\nvar hoistNonReactStatics = _interopDefault(require('hoist-non-react-statics'));\n\nvar optimizely = require('@optimizely/optimizely-sdk');\n/**\r\n * Copyright 2018-2019, Optimizely\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nvar _a = React.createContext({\n  optimizely: null,\n  isServerSide: false,\n  timeout: 0\n}),\n    Consumer = _a.Consumer,\n    Provider = _a.Provider;\n\nvar OptimizelyContextConsumer = Consumer;\nvar OptimizelyContextProvider = Provider;\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nfunction __rest(s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\n/**\r\n * Copyright 2019, Optimizely\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction areUsersEqual(user1, user2) {\n  if (user1.id !== user2.id) {\n    return false;\n  }\n\n  var user1keys = Object.keys(user1.attributes);\n  var user2keys = Object.keys(user2.attributes);\n  user1keys.sort();\n  user2keys.sort();\n  var areKeysLenEqual = user1keys.length === user2keys.length;\n\n  if (!areKeysLenEqual) {\n    return false;\n  }\n\n  for (var i = 0; i < user1keys.length; i++) {\n    var key1 = user1keys[i];\n    var key2 = user2keys[i];\n\n    if (key1 !== key2) {\n      return false;\n    }\n\n    if (user1.attributes[key1] !== user2.attributes[key2]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction hoistStaticsAndForwardRefs(Target, Source, displayName) {\n  // Make sure to hoist statics and forward any refs through from Source to Target\n  // From the React docs:\n  //   https://reactjs.org/docs/higher-order-components.html#static-methods-must-be-copied-over\n  //   https://reactjs.org/docs/forwarding-refs.html#forwarding-refs-in-higher-order-components\n  var forwardRef = function (props, ref) {\n    return React.createElement(Target, __assign({}, props, {\n      forwardedRef: ref\n    }));\n  };\n\n  forwardRef.displayName = displayName + \"(\" + (Source.displayName || Source.name) + \")\";\n  return hoistNonReactStatics(React.forwardRef(forwardRef), Source);\n}\n\nvar logger = logging.getLogger('<OptimizelyProvider>');\n\nvar OptimizelyProvider =\n/** @class */\nfunction (_super) {\n  __extends(OptimizelyProvider, _super);\n\n  function OptimizelyProvider(props) {\n    var _this = _super.call(this, props) || this;\n\n    var optimizely = props.optimizely,\n        userId = props.userId,\n        userAttributes = props.userAttributes,\n        user = props.user; // check if user id/attributes are provided as props and set them ReactSDKClient\n\n    var finalUser = null;\n\n    if (user) {\n      if ('then' in user) {\n        user.then(function (user) {\n          optimizely.setUser(user);\n        });\n      } else {\n        finalUser = {\n          id: user.id,\n          attributes: user.attributes || {}\n        };\n      }\n    } else if (userId) {\n      finalUser = {\n        id: userId,\n        attributes: userAttributes || {}\n      }; // deprecation warning\n\n      logger.warn('Passing userId and userAttributes as props is deprecated, please switch to using `user` prop');\n    }\n\n    if (finalUser) {\n      optimizely.setUser(finalUser);\n    }\n\n    return _this;\n  }\n\n  OptimizelyProvider.prototype.componentDidUpdate = function (prevProps) {\n    if (prevProps.isServerSide) {\n      // dont react to updates on server\n      return;\n    }\n\n    var optimizely = this.props.optimizely;\n\n    if (this.props.user && 'id' in this.props.user) {\n      if (!optimizely.user.id) {\n        // no user is set in optimizely, update\n        optimizely.setUser(this.props.user);\n      } else if ( // if the users aren't equal update\n      !areUsersEqual({\n        id: optimizely.user.id,\n        attributes: optimizely.user.attributes\n      }, {\n        id: this.props.user.id,\n        // TODO see if we can use computeDerivedStateFromProps\n        attributes: this.props.user.attributes || {}\n      })) {\n        optimizely.setUser(this.props.user);\n      }\n    }\n  };\n\n  OptimizelyProvider.prototype.render = function () {\n    var _a = this.props,\n        optimizely = _a.optimizely,\n        children = _a.children,\n        timeout = _a.timeout;\n    var isServerSide = !!this.props.isServerSide;\n    var value = {\n      optimizely: optimizely,\n      isServerSide: isServerSide,\n      timeout: timeout\n    };\n    return React.createElement(OptimizelyContextProvider, {\n      value: value\n    }, children);\n  };\n\n  return OptimizelyProvider;\n}(React.Component);\n\nfunction withOptimizely(Component) {\n  var WithOptimizely =\n  /** @class */\n  function (_super) {\n    __extends(WithOptimizely, _super);\n\n    function WithOptimizely() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    WithOptimizely.prototype.render = function () {\n      var _a = this.props,\n          forwardedRef = _a.forwardedRef,\n          rest = __rest(_a, [\"forwardedRef\"]); // Note: Casting props to P is necessary because of this TypeScript issue:\n      // https://github.com/microsoft/TypeScript/issues/28884\n\n\n      return React.createElement(OptimizelyContextConsumer, null, function (value) {\n        return React.createElement(Component, __assign({}, rest, {\n          optimizelyReadyTimeout: value.timeout,\n          optimizely: value.optimizely,\n          isServerSide: value.isServerSide,\n          ref: forwardedRef\n        }));\n      });\n    };\n\n    return WithOptimizely;\n  }(React.Component);\n\n  var withRefsForwarded = hoistStaticsAndForwardRefs(WithOptimizely, Component, 'withOptimizely');\n  return withRefsForwarded;\n}\n/**\r\n * Copyright 2019-2020, Optimizely\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nvar logger$1 = logging.getLogger('ReactSDK');\nvar REACT_SDK_CLIENT_ENGINE = 'react-sdk';\nvar REACT_SDK_CLIENT_VERSION = '1.1.0';\nvar DEFAULT_ON_READY_TIMEOUT = 5000;\n\nvar OptimizelyReactSDKClient =\n/** @class */\nfunction () {\n  /**\r\n   * Creates an instance of OptimizelyReactSDKClient.\r\n   * @param {optimizely.Config} [config={}]\r\n   */\n  function OptimizelyReactSDKClient(config) {\n    var _this = this;\n\n    this.user = {\n      id: null,\n      attributes: {}\n    };\n    this.isUserPromiseResolved = false;\n    this.onUserUpdateHandlers = [];\n    this.initialConfig = config;\n\n    this.userPromiseResovler = function () {};\n\n    var configWithClientInfo = __assign({}, config, {\n      clientEngine: REACT_SDK_CLIENT_ENGINE,\n      clientVersion: REACT_SDK_CLIENT_VERSION\n    });\n\n    this._client = optimizely.createInstance(configWithClientInfo);\n    this.userPromise = new Promise(function (resolve) {\n      _this.userPromiseResovler = resolve;\n    }).then(function () {\n      return {\n        success: true\n      };\n    });\n    this.dataReadyPromise = Promise.all([this.userPromise, this._client.onReady()]).then(function () {\n      return {\n        success: true,\n        reason: 'datafile and user resolved'\n      };\n    });\n  }\n\n  OptimizelyReactSDKClient.prototype.onReady = function (config) {\n    if (config === void 0) {\n      config = {};\n    }\n\n    var timeoutId;\n    var timeout = DEFAULT_ON_READY_TIMEOUT;\n\n    if (config && config.timeout !== undefined) {\n      timeout = config.timeout;\n    }\n\n    var timeoutPromise = new Promise(function (resolve) {\n      timeoutId = setTimeout(function () {\n        resolve({\n          success: false,\n          reason: 'failed to initialize onReady before timeout, either the datafile or user info was not set before the timeout'\n        });\n      }, timeout);\n    });\n    return Promise.race([this.dataReadyPromise, timeoutPromise]).then(function (res) {\n      clearTimeout(timeoutId);\n      return res;\n    });\n  };\n\n  OptimizelyReactSDKClient.prototype.setUser = function (userInfo) {\n    var _this = this; // TODO add check for valid user\n\n\n    if (userInfo.id) {\n      this.user.id = userInfo.id;\n    }\n\n    if (userInfo.attributes) {\n      this.user.attributes = userInfo.attributes;\n    }\n\n    if (!this.isUserPromiseResolved) {\n      this.userPromiseResovler(this.user);\n      this.isUserPromiseResolved = true;\n    }\n\n    this.onUserUpdateHandlers.forEach(function (handler) {\n      return handler(_this.user);\n    });\n  };\n\n  OptimizelyReactSDKClient.prototype.onUserUpdate = function (handler) {\n    var _this = this;\n\n    this.onUserUpdateHandlers.push(handler);\n    return function () {\n      var ind = _this.onUserUpdateHandlers.indexOf(handler);\n\n      if (ind > -1) {\n        _this.onUserUpdateHandlers.splice(ind, 1);\n      }\n    };\n  };\n  /**\r\n   * Buckets visitor and sends impression event to Optimizely\r\n   * @param {string} experimentKey\r\n   * @param {string} [overrideUserId]\r\n   * @param {optimizely.UserAttributes} [overrideAttributes]\r\n   * @returns {(string | null)}\r\n   * @memberof OptimizelyReactSDKClient\r\n   */\n\n\n  OptimizelyReactSDKClient.prototype.activate = function (experimentKey, overrideUserId, overrideAttributes) {\n    var user = this.getUserContextWithOverrides(overrideUserId, overrideAttributes);\n\n    if (user.id === null) {\n      logger$1.info('Not activating experiment \"%s\" because userId is not set', experimentKey);\n      return null;\n    }\n\n    return this._client.activate(experimentKey, user.id, user.attributes);\n  };\n  /**\r\n   * Gets variation where visitor will be bucketed\r\n   * @param {string} experimentKey\r\n   * @param {string} [overrideUserId]\r\n   * @param {optimizely.UserAttributes} [overrideAttributes]\r\n   * @returns {(string | null)}\r\n   * @memberof OptimizelyReactSDKClient\r\n   */\n\n\n  OptimizelyReactSDKClient.prototype.getVariation = function (experimentKey, overrideUserId, overrideAttributes) {\n    var user = this.getUserContextWithOverrides(overrideUserId, overrideAttributes);\n\n    if (user.id === null) {\n      logger$1.info('getVariation returned null for experiment \"%s\" because userId is not set', experimentKey);\n      return null;\n    }\n\n    return this._client.getVariation(experimentKey, user.id, user.attributes);\n  };\n  /**\r\n   * Sends conversion event to Optimizely\r\n   * @param {string} eventKey\r\n   * @param {string} [overrideUserId]\r\n   * @param {optimizely.UserAttributes} [overrideAttributes]\r\n   * @param {optimizely.EventTags} [eventTags]\r\n   * @memberof OptimizelyReactSDKClient\r\n   */\n\n\n  OptimizelyReactSDKClient.prototype.track = function (eventKey, overrideUserId, overrideAttributes, eventTags) {\n    if (typeof overrideUserId !== 'undefined' && typeof overrideUserId !== 'string') {\n      eventTags = overrideUserId;\n      overrideUserId = undefined;\n      overrideAttributes = undefined;\n    }\n\n    var user = this.getUserContextWithOverrides(overrideUserId, overrideAttributes);\n\n    if (user.id === null) {\n      logger$1.info('track for event \"%s\" not being sent because userId is not set', eventKey);\n      return;\n    }\n\n    return this._client.track(eventKey, user.id, user.attributes, eventTags);\n  };\n  /**\r\n   * Returns true if the feature is enabled for the given user\r\n   * @param {string} feature\r\n   * @param {string} [overrideUserId]\r\n   * @param {optimizely.UserAttributes} [overrideAttributes]\r\n   * @returns {boolean}\r\n   * @memberof OptimizelyReactSDKClient\r\n   */\n\n\n  OptimizelyReactSDKClient.prototype.isFeatureEnabled = function (feature, overrideUserId, overrideAttributes) {\n    var user = this.getUserContextWithOverrides(overrideUserId, overrideAttributes);\n\n    if (user.id === null) {\n      logger$1.info('isFeatureEnabled returning false for feature \"%s\" because userId is not set', feature);\n      return false;\n    }\n\n    return this._client.isFeatureEnabled(feature, user.id, user.attributes);\n  };\n  /**\r\n   * Get all variables for a feature, regardless of the feature being enabled/disabled\r\n   * @param {string} feature\r\n   * @param {string} [overrideUserId]\r\n   * @param {optimizely.UserAttributes} [overrideAttributes]\r\n   * @returns {VariableValuesObject}\r\n   * @memberof OptimizelyReactSDKClient\r\n   */\n\n\n  OptimizelyReactSDKClient.prototype.getFeatureVariables = function (featureKey, overrideUserId, overrideAttributes) {\n    var _this = this;\n\n    var user = this.getUserContextWithOverrides(overrideUserId, overrideAttributes);\n    var userId = user.id;\n\n    if (userId === null) {\n      logger$1.info('getFeatureVariables returning `{}` for feature \"%s\" because userId is not set', featureKey);\n      return {};\n    }\n\n    var userAttributes = user.attributes;\n    var variableObj = {};\n\n    var config = this._client.projectConfigManager.getConfig();\n\n    if (!config) {\n      return {};\n    }\n\n    var feature = config.featureKeyMap[featureKey];\n\n    if (!feature) {\n      return {};\n    }\n\n    var variables = feature.variables;\n    variables.forEach(function (variableDef) {\n      var type = variableDef.type;\n      var key = variableDef.key;\n\n      switch (type) {\n        case 'string':\n          variableObj[key] = _this._client.getFeatureVariableString(featureKey, key, userId, userAttributes);\n          break;\n\n        case 'boolean':\n          variableObj[key] = _this._client.getFeatureVariableBoolean(featureKey, key, userId, userAttributes);\n          break;\n\n        case 'integer':\n          variableObj[key] = _this._client.getFeatureVariableInteger(featureKey, key, userId, userAttributes);\n          break;\n\n        case 'double':\n          variableObj[key] = _this._client.getFeatureVariableDouble(featureKey, key, userId, userAttributes);\n          break;\n      }\n    });\n    return variableObj;\n  };\n  /**\r\n   * Returns value for the given string variable attached to the given feature\r\n   * flag\r\n   * @param {string} feature\r\n   * @param {string} variable\r\n   * @param {string} [overrideUserId]\r\n   * @param {optimizely.UserAttributes} [overrideAttributes]\r\n   * @returns {(string | null)}\r\n   * @memberof OptimizelyReactSDKClient\r\n   */\n\n\n  OptimizelyReactSDKClient.prototype.getFeatureVariableString = function (feature, variable, overrideUserId, overrideAttributes) {\n    var user = this.getUserContextWithOverrides(overrideUserId, overrideAttributes);\n\n    if (user.id === null) {\n      return null;\n    }\n\n    return this._client.getFeatureVariableString(feature, variable, user.id, user.attributes);\n  };\n  /**\r\n   * Returns value for the given boolean variable attached to the given feature\r\n   * flag\r\n   * @param {string} feature\r\n   * @param {string} variable\r\n   * @param {string} [overrideUserId]\r\n   * @param {optimizely.UserAttributes} [overrideAttributes]\r\n   * @returns {(string | null)}\r\n   * @memberof OptimizelyReactSDKClient\r\n   */\n\n\n  OptimizelyReactSDKClient.prototype.getFeatureVariableBoolean = function (feature, variable, overrideUserId, overrideAttributes) {\n    var user = this.getUserContextWithOverrides(overrideUserId, overrideAttributes);\n\n    if (user.id === null) {\n      return null;\n    }\n\n    return this._client.getFeatureVariableBoolean(feature, variable, user.id, user.attributes);\n  };\n  /**\r\n   * Returns value for the given integer variable attached to the given feature\r\n   * flag\r\n   * @param {string} feature\r\n   * @param {string} variable\r\n   * @param {string} [overrideUserId]\r\n   * @param {optimizely.UserAttributes} [overrideAttributes]\r\n   * @returns {(string | null)}\r\n   * @memberof OptimizelyReactSDKClient\r\n   */\n\n\n  OptimizelyReactSDKClient.prototype.getFeatureVariableInteger = function (feature, variable, overrideUserId, overrideAttributes) {\n    var user = this.getUserContextWithOverrides(overrideUserId, overrideAttributes);\n\n    if (user.id === null) {\n      return null;\n    }\n\n    return this._client.getFeatureVariableInteger(feature, variable, user.id, user.attributes);\n  };\n  /**\r\n   * Returns value for the given double variable attached to the given feature\r\n   * flag\r\n   * @param {string} feature\r\n   * @param {string} variable\r\n   * @param {string} [overrideUserId]\r\n   * @param {optimizely.UserAttributes} [overrideAttributes]\r\n   * @returns {(string | null)}\r\n   * @memberof OptimizelyReactSDKClient\r\n   */\n\n\n  OptimizelyReactSDKClient.prototype.getFeatureVariableDouble = function (feature, variable, overrideUserId, overrideAttributes) {\n    var user = this.getUserContextWithOverrides(overrideUserId, overrideAttributes);\n\n    if (user.id === null) {\n      return null;\n    }\n\n    return this._client.getFeatureVariableDouble(feature, variable, user.id, user.attributes);\n  };\n  /**\r\n   * Get an array of all enabled features\r\n   * @param {string} [overrideUserId]\r\n   * @param {optimizely.UserAttributes} [overrideUserId]\r\n   * @returns {Array<string>}\r\n   * @memberof OptimizelyReactSDKClient\r\n   */\n\n\n  OptimizelyReactSDKClient.prototype.getEnabledFeatures = function (overrideUserId, overrideAttributes) {\n    var user = this.getUserContextWithOverrides(overrideUserId, overrideAttributes);\n\n    if (user.id === null) {\n      return [];\n    }\n\n    return this._client.getEnabledFeatures(user.id, user.attributes);\n  };\n  /**\r\n   * Gets the forced variation for a given user and experiment\r\n   * @param {string} experiment\r\n   * @param {string} [overrideUserId]\r\n   * @returns {(string | null)}\r\n   * @memberof OptimizelyReactSDKClient\r\n   */\n\n\n  OptimizelyReactSDKClient.prototype.getForcedVariation = function (experiment, overrideUserId) {\n    var user = this.getUserContextWithOverrides(overrideUserId);\n\n    if (user.id === null) {\n      return null;\n    }\n\n    return this._client.getForcedVariation(experiment, user.id);\n  };\n  /**\r\n   * Force a user into a variation for a given experiment\r\n   * @param {string} experiment\r\n   * @param {string} overrideUserIdOrVariationKey\r\n   * @param {string} [variationKey]\r\n   * @returns {boolean}\r\n   * @memberof OptimizelyReactSDKClient\r\n   */\n\n\n  OptimizelyReactSDKClient.prototype.setForcedVariation = function (experiment, overrideUserIdOrVariationKey, variationKey) {\n    var finalUserId = null;\n    var finalVariationKey = null;\n\n    if (arguments.length === 2) {\n      finalVariationKey = overrideUserIdOrVariationKey;\n      finalUserId = this.getUserContextWithOverrides().id;\n    } else if (arguments.length === 3) {\n      finalUserId = this.getUserContextWithOverrides(overrideUserIdOrVariationKey).id;\n\n      if (variationKey === undefined) {\n        // can't have undefined if supplying all 3 arguments\n        return false;\n      }\n\n      finalVariationKey = variationKey;\n    }\n\n    if (finalUserId === null) {\n      return false;\n    }\n\n    return this._client.setForcedVariation(experiment, finalUserId, finalVariationKey);\n  };\n  /**\r\n   *  Returns OptimizelyConfig object containing experiments and features data\r\n   *  @returns {optimizely.OptimizelyConfig | null} optimizely config\r\n   */\n\n\n  OptimizelyReactSDKClient.prototype.getOptimizelyConfig = function () {\n    return this._client.getOptimizelyConfig();\n  };\n  /**\r\n   * Cleanup method for killing an running timers and flushing eventQueue\r\n   */\n\n\n  OptimizelyReactSDKClient.prototype.close = function () {\n    return this._client.close();\n  };\n\n  Object.defineProperty(OptimizelyReactSDKClient.prototype, \"client\", {\n    /**\r\n     * Provide access to inner optimizely.Client object\r\n     */\n    get: function () {\n      return this._client;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(OptimizelyReactSDKClient.prototype, \"notificationCenter\", {\n    get: function () {\n      return this._client.notificationCenter;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  OptimizelyReactSDKClient.prototype.getUserContextWithOverrides = function (overrideUserId, overrideAttributes) {\n    var finalUserId = overrideUserId === undefined ? this.user.id : overrideUserId;\n    var finalUserAttributes = overrideAttributes === undefined ? this.user.attributes : overrideAttributes;\n    return {\n      id: finalUserId,\n      attributes: finalUserAttributes\n    };\n  };\n\n  return OptimizelyReactSDKClient;\n}();\n\nfunction createInstance(config) {\n  return new OptimizelyReactSDKClient(config);\n}\n\nvar logger$2 = logging.getLogger('<OptimizelyFeature>');\n\nvar FeatureComponent =\n/** @class */\nfunction (_super) {\n  __extends(FeatureComponent, _super);\n\n  function FeatureComponent(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.autoUpdate = false;\n\n    _this.unregisterUserListener = function () {};\n\n    var autoUpdate = props.autoUpdate,\n        isServerSide = props.isServerSide,\n        optimizely = props.optimizely,\n        feature = props.feature;\n    _this.autoUpdate = !!autoUpdate;\n\n    if (isServerSide) {\n      if (optimizely === null) {\n        throw new Error('optimizely prop must be supplied');\n      }\n\n      var isEnabled = optimizely.isFeatureEnabled(feature);\n      var variables = optimizely.getFeatureVariables(feature);\n      _this.state = {\n        canRender: true,\n        isEnabled: isEnabled,\n        variables: variables\n      };\n    } else {\n      _this.state = {\n        canRender: false,\n        isEnabled: false,\n        variables: {}\n      };\n    }\n\n    return _this;\n  }\n\n  FeatureComponent.prototype.componentDidMount = function () {\n    var _this = this;\n\n    var _a = this.props,\n        feature = _a.feature,\n        optimizely = _a.optimizely,\n        optimizelyReadyTimeout = _a.optimizelyReadyTimeout,\n        isServerSide = _a.isServerSide,\n        timeout = _a.timeout;\n\n    if (optimizely === null) {\n      throw new Error('optimizely prop must be supplied');\n    }\n\n    if (isServerSide) {\n      return;\n    } // allow overriding of the ready timeout via the `timeout` prop passed to <Experiment />\n\n\n    var finalReadyTimeout = timeout !== undefined ? timeout : optimizelyReadyTimeout;\n    optimizely.onReady({\n      timeout: finalReadyTimeout\n    }).then(function (res) {\n      if (res.success) {\n        logger$2.info('feature=\"%s\" successfully rendered for user=\"%s\"', feature, optimizely.user.id);\n      } else {\n        logger$2.info('feature=\"%s\" could not be checked before timeout of %sms, reason=\"%s\" ', feature, timeout === undefined ? DEFAULT_ON_READY_TIMEOUT : timeout, res.reason || '');\n      }\n\n      var isEnabled = optimizely.isFeatureEnabled(feature);\n      var variables = optimizely.getFeatureVariables(feature);\n\n      _this.setState({\n        canRender: true,\n        isEnabled: isEnabled,\n        variables: variables\n      });\n\n      if (_this.autoUpdate) {\n        _this.setupAutoUpdateListeners();\n      }\n    });\n  };\n\n  FeatureComponent.prototype.setupAutoUpdateListeners = function () {\n    var _this = this;\n\n    var _a = this.props,\n        optimizely = _a.optimizely,\n        feature = _a.feature;\n\n    if (optimizely === null) {\n      return;\n    }\n\n    this.optimizelyNotificationId = optimizely.notificationCenter.addNotificationListener('OPTIMIZELY_CONFIG_UPDATE', function () {\n      logger$2.info('OPTIMIZELY_CONFIG_UPDATE, re-evaluating feature=\"%s\" for user=\"%s\"', feature, optimizely.user.id);\n      var isEnabled = optimizely.isFeatureEnabled(feature);\n      var variables = optimizely.getFeatureVariables(feature);\n\n      _this.setState({\n        isEnabled: isEnabled,\n        variables: variables\n      });\n    });\n    this.unregisterUserListener = optimizely.onUserUpdate(function () {\n      logger$2.info('User update, re-evaluating feature=\"%s\" for user=\"%s\"', feature, optimizely.user.id);\n      var isEnabled = optimizely.isFeatureEnabled(feature);\n      var variables = optimizely.getFeatureVariables(feature);\n\n      _this.setState({\n        isEnabled: isEnabled,\n        variables: variables\n      });\n    });\n  };\n\n  FeatureComponent.prototype.componentWillUnmount = function () {\n    var _a = this.props,\n        optimizely = _a.optimizely,\n        isServerSide = _a.isServerSide;\n\n    if (isServerSide || !this.autoUpdate) {\n      return;\n    }\n\n    if (optimizely && this.optimizelyNotificationId) {\n      optimizely.notificationCenter.removeNotificationListener(this.optimizelyNotificationId);\n    }\n\n    this.unregisterUserListener();\n  };\n\n  FeatureComponent.prototype.render = function () {\n    var children = this.props.children;\n    var _a = this.state,\n        isEnabled = _a.isEnabled,\n        variables = _a.variables,\n        canRender = _a.canRender;\n\n    if (!canRender) {\n      return null;\n    }\n\n    return children(isEnabled, variables);\n  };\n\n  return FeatureComponent;\n}(React.Component);\n\nvar OptimizelyFeature = withOptimizely(FeatureComponent);\nvar logger$3 = logging.getLogger('<OptimizelyExperiment>');\n\nvar Experiment =\n/** @class */\nfunction (_super) {\n  __extends(Experiment, _super);\n\n  function Experiment(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.unregisterUserListener = function () {};\n\n    _this.autoUpdate = false;\n    var autoUpdate = props.autoUpdate,\n        isServerSide = props.isServerSide,\n        optimizely = props.optimizely,\n        experiment = props.experiment;\n    _this.autoUpdate = !!autoUpdate;\n\n    if (isServerSide) {\n      if (optimizely === null) {\n        throw new Error('optimizely prop must be supplied');\n      }\n\n      var variation = optimizely.activate(experiment);\n      _this.state = {\n        canRender: true,\n        variation: variation\n      };\n    } else {\n      _this.state = {\n        canRender: false,\n        variation: null\n      };\n    }\n\n    return _this;\n  }\n\n  Experiment.prototype.componentDidMount = function () {\n    var _this = this;\n\n    var _a = this.props,\n        experiment = _a.experiment,\n        optimizely = _a.optimizely,\n        optimizelyReadyTimeout = _a.optimizelyReadyTimeout,\n        isServerSide = _a.isServerSide,\n        timeout = _a.timeout;\n\n    if (!optimizely) {\n      throw new Error('optimizely prop must be supplied');\n    }\n\n    if (isServerSide) {\n      return;\n    } // allow overriding of the ready timeout via the `timeout` prop passed to <Experiment />\n\n\n    var finalReadyTimeout = timeout !== undefined ? timeout : optimizelyReadyTimeout;\n    optimizely.onReady({\n      timeout: finalReadyTimeout\n    }).then(function (res) {\n      if (res.success) {\n        logger$3.info('experiment=\"%s\" successfully rendered for user=\"%s\"', experiment, optimizely.user.id);\n      } else {\n        logger$3.info('experiment=\"%s\" could not be checked before timeout of %sms, reason=\"%s\" ', experiment, timeout === undefined ? DEFAULT_ON_READY_TIMEOUT : timeout, res.reason || '');\n      }\n\n      var variation = optimizely.activate(experiment);\n\n      _this.setState({\n        canRender: true,\n        variation: variation\n      });\n\n      if (_this.autoUpdate) {\n        _this.setupAutoUpdateListeners();\n      }\n    });\n  };\n\n  Experiment.prototype.setupAutoUpdateListeners = function () {\n    var _this = this;\n\n    var _a = this.props,\n        optimizely = _a.optimizely,\n        experiment = _a.experiment;\n\n    if (optimizely === null) {\n      return;\n    }\n\n    this.optimizelyNotificationId = optimizely.notificationCenter.addNotificationListener('OPTIMIZELY_CONFIG_UPDATE', function () {\n      logger$3.info('OPTIMIZELY_CONFIG_UPDATE, re-evaluating experiment=\"%s\" for user=\"%s\"', experiment, optimizely.user.id);\n      var variation = optimizely.activate(experiment);\n\n      _this.setState({\n        variation: variation\n      });\n    });\n    this.unregisterUserListener = optimizely.onUserUpdate(function () {\n      logger$3.info('User update, re-evaluating experiment=\"%s\" for user=\"%s\"', experiment, optimizely.user.id);\n      var variation = optimizely.activate(experiment);\n\n      _this.setState({\n        variation: variation\n      });\n    });\n  };\n\n  Experiment.prototype.componentWillUnmount = function () {\n    var _a = this.props,\n        optimizely = _a.optimizely,\n        isServerSide = _a.isServerSide;\n\n    if (isServerSide || !this.autoUpdate) {\n      return;\n    }\n\n    if (optimizely && this.optimizelyNotificationId) {\n      optimizely.notificationCenter.removeNotificationListener(this.optimizelyNotificationId);\n    }\n\n    this.unregisterUserListener();\n  };\n\n  Experiment.prototype.render = function () {\n    var children = this.props.children;\n    var _a = this.state,\n        variation = _a.variation,\n        canRender = _a.canRender;\n\n    if (!canRender) {\n      return null;\n    }\n\n    if (children != null && typeof children === 'function') {\n      return children(variation);\n    }\n\n    var match = null; // We use React.Children.forEach instead of React.Children.toArray().find()\n    // here because toArray adds keys to all child elements and we do not want\n    // to trigger an unmount/remount\n\n    React.Children.forEach(this.props.children, function (child) {\n      if (match || !React.isValidElement(child)) {\n        return;\n      }\n\n      if (child.props.variation) {\n        if (variation === child.props.variation) {\n          match = child;\n        }\n      } else if (child.props.default) {\n        match = child;\n      }\n    });\n    return match ? React.cloneElement(match, {\n      variation: variation\n    }) : null;\n  };\n\n  return Experiment;\n}(React.Component);\n\nvar OptimizelyExperiment = withOptimizely(Experiment);\n\nvar Variation =\n/** @class */\nfunction (_super) {\n  __extends(Variation, _super);\n\n  function Variation() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Variation.prototype.render = function () {\n    return this.props.children;\n  };\n\n  return Variation;\n}(React.Component);\n\nvar OptimizelyVariation = Variation;\n/**\r\n * Copyright 2019, Optimizely\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nvar logger$4 = logging.getLogger('ReactSDK');\n/**\r\n * logOnlyEventDispatcher only logs a message at the debug level, and does not\r\n * send any requests to the Optimizely results backend. Use this to disable\r\n * all event dispatching.\r\n */\n\nvar logOnlyEventDispatcher = {\n  dispatchEvent: function (event, callback) {\n    logger$4.debug('Event not dispatched by disabled event dispatcher: %s', function () {\n      var eventStr;\n\n      try {\n        eventStr = JSON.stringify(event);\n      } catch (err) {\n        eventStr = 'error stringifying event';\n      }\n\n      return eventStr;\n    });\n  }\n};\n/**\r\n * Copyright 2018-2019, Optimizely\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nObject.defineProperty(exports, 'enums', {\n  enumerable: true,\n  get: function () {\n    return optimizely.enums;\n  }\n});\nObject.defineProperty(exports, 'errorHandler', {\n  enumerable: true,\n  get: function () {\n    return optimizely.errorHandler;\n  }\n});\nObject.defineProperty(exports, 'eventDispatcher', {\n  enumerable: true,\n  get: function () {\n    return optimizely.eventDispatcher;\n  }\n});\nObject.defineProperty(exports, 'logging', {\n  enumerable: true,\n  get: function () {\n    return optimizely.logging;\n  }\n});\nObject.defineProperty(exports, 'setLogLevel', {\n  enumerable: true,\n  get: function () {\n    return optimizely.setLogLevel;\n  }\n});\nObject.defineProperty(exports, 'setLogger', {\n  enumerable: true,\n  get: function () {\n    return optimizely.setLogger;\n  }\n});\nexports.OptimizelyContextConsumer = OptimizelyContextConsumer;\nexports.OptimizelyContextProvider = OptimizelyContextProvider;\nexports.OptimizelyExperiment = OptimizelyExperiment;\nexports.OptimizelyFeature = OptimizelyFeature;\nexports.OptimizelyProvider = OptimizelyProvider;\nexports.OptimizelyVariation = OptimizelyVariation;\nexports.createInstance = createInstance;\nexports.logOnlyEventDispatcher = logOnlyEventDispatcher;\nexports.withOptimizely = withOptimizely;","map":{"version":3,"sources":["/home/abhishek/Music/contentstack-reactjs-ab-testing/node_modules/@optimizely/react-sdk/dist/react-sdk.js"],"names":["Object","defineProperty","exports","value","_interopDefault","ex","React","require","logging","hoistNonReactStatics","optimizely","_a","createContext","isServerSide","timeout","Consumer","Provider","OptimizelyContextConsumer","OptimizelyContextProvider","extendStatics","d","b","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","areUsersEqual","user1","user2","id","user1keys","keys","attributes","user2keys","sort","areKeysLenEqual","key1","key2","hoistStaticsAndForwardRefs","Target","Source","displayName","forwardRef","props","ref","createElement","forwardedRef","name","logger","getLogger","OptimizelyProvider","_super","_this","userId","userAttributes","user","finalUser","then","setUser","warn","componentDidUpdate","prevProps","render","children","Component","withOptimizely","WithOptimizely","rest","optimizelyReadyTimeout","withRefsForwarded","logger$1","REACT_SDK_CLIENT_ENGINE","REACT_SDK_CLIENT_VERSION","DEFAULT_ON_READY_TIMEOUT","OptimizelyReactSDKClient","config","isUserPromiseResolved","onUserUpdateHandlers","initialConfig","userPromiseResovler","configWithClientInfo","clientEngine","clientVersion","_client","createInstance","userPromise","Promise","resolve","success","dataReadyPromise","all","onReady","reason","timeoutId","undefined","timeoutPromise","setTimeout","race","res","clearTimeout","userInfo","forEach","handler","onUserUpdate","push","ind","splice","activate","experimentKey","overrideUserId","overrideAttributes","getUserContextWithOverrides","info","getVariation","track","eventKey","eventTags","isFeatureEnabled","feature","getFeatureVariables","featureKey","variableObj","projectConfigManager","getConfig","featureKeyMap","variables","variableDef","type","key","getFeatureVariableString","getFeatureVariableBoolean","getFeatureVariableInteger","getFeatureVariableDouble","variable","getEnabledFeatures","getForcedVariation","experiment","setForcedVariation","overrideUserIdOrVariationKey","variationKey","finalUserId","finalVariationKey","getOptimizelyConfig","close","get","enumerable","configurable","notificationCenter","finalUserAttributes","logger$2","FeatureComponent","autoUpdate","unregisterUserListener","Error","isEnabled","state","canRender","componentDidMount","finalReadyTimeout","setState","setupAutoUpdateListeners","optimizelyNotificationId","addNotificationListener","componentWillUnmount","removeNotificationListener","OptimizelyFeature","logger$3","Experiment","variation","match","Children","child","isValidElement","default","cloneElement","OptimizelyExperiment","Variation","OptimizelyVariation","logger$4","logOnlyEventDispatcher","dispatchEvent","event","callback","debug","eventStr","JSON","stringify","err","enums","errorHandler","eventDispatcher","setLogLevel","setLogger"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar React = require('react');\nvar logging = require('@optimizely/js-sdk-logging');\nvar hoistNonReactStatics = _interopDefault(require('hoist-non-react-statics'));\nvar optimizely = require('@optimizely/optimizely-sdk');\n\n/**\r\n * Copyright 2018-2019, Optimizely\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar _a = React.createContext({\r\n    optimizely: null,\r\n    isServerSide: false,\r\n    timeout: 0,\r\n}), Consumer = _a.Consumer, Provider = _a.Provider;\r\nvar OptimizelyContextConsumer = Consumer;\r\nvar OptimizelyContextProvider = Provider;\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\n\n/**\r\n * Copyright 2019, Optimizely\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction areUsersEqual(user1, user2) {\r\n    if (user1.id !== user2.id) {\r\n        return false;\r\n    }\r\n    var user1keys = Object.keys(user1.attributes);\r\n    var user2keys = Object.keys(user2.attributes);\r\n    user1keys.sort();\r\n    user2keys.sort();\r\n    var areKeysLenEqual = user1keys.length === user2keys.length;\r\n    if (!areKeysLenEqual) {\r\n        return false;\r\n    }\r\n    for (var i = 0; i < user1keys.length; i++) {\r\n        var key1 = user1keys[i];\r\n        var key2 = user2keys[i];\r\n        if (key1 !== key2) {\r\n            return false;\r\n        }\r\n        if (user1.attributes[key1] !== user2.attributes[key2]) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction hoistStaticsAndForwardRefs(Target, Source, displayName) {\r\n    // Make sure to hoist statics and forward any refs through from Source to Target\r\n    // From the React docs:\r\n    //   https://reactjs.org/docs/higher-order-components.html#static-methods-must-be-copied-over\r\n    //   https://reactjs.org/docs/forwarding-refs.html#forwarding-refs-in-higher-order-components\r\n    var forwardRef = function (props, ref) { return (React.createElement(Target, __assign({}, props, { forwardedRef: ref }))); };\r\n    forwardRef.displayName = displayName + \"(\" + (Source.displayName || Source.name) + \")\";\r\n    return hoistNonReactStatics(React.forwardRef(forwardRef), Source);\r\n}\n\nvar logger = logging.getLogger('<OptimizelyProvider>');\r\nvar OptimizelyProvider = /** @class */ (function (_super) {\r\n    __extends(OptimizelyProvider, _super);\r\n    function OptimizelyProvider(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        var optimizely = props.optimizely, userId = props.userId, userAttributes = props.userAttributes, user = props.user;\r\n        // check if user id/attributes are provided as props and set them ReactSDKClient\r\n        var finalUser = null;\r\n        if (user) {\r\n            if ('then' in user) {\r\n                user.then(function (user) {\r\n                    optimizely.setUser(user);\r\n                });\r\n            }\r\n            else {\r\n                finalUser = {\r\n                    id: user.id,\r\n                    attributes: user.attributes || {},\r\n                };\r\n            }\r\n        }\r\n        else if (userId) {\r\n            finalUser = {\r\n                id: userId,\r\n                attributes: userAttributes || {},\r\n            };\r\n            // deprecation warning\r\n            logger.warn('Passing userId and userAttributes as props is deprecated, please switch to using `user` prop');\r\n        }\r\n        if (finalUser) {\r\n            optimizely.setUser(finalUser);\r\n        }\r\n        return _this;\r\n    }\r\n    OptimizelyProvider.prototype.componentDidUpdate = function (prevProps) {\r\n        if (prevProps.isServerSide) {\r\n            // dont react to updates on server\r\n            return;\r\n        }\r\n        var optimizely = this.props.optimizely;\r\n        if (this.props.user && 'id' in this.props.user) {\r\n            if (!optimizely.user.id) {\r\n                // no user is set in optimizely, update\r\n                optimizely.setUser(this.props.user);\r\n            }\r\n            else if (\r\n            // if the users aren't equal update\r\n            !areUsersEqual({\r\n                id: optimizely.user.id,\r\n                attributes: optimizely.user.attributes,\r\n            }, {\r\n                id: this.props.user.id,\r\n                // TODO see if we can use computeDerivedStateFromProps\r\n                attributes: this.props.user.attributes || {},\r\n            })) {\r\n                optimizely.setUser(this.props.user);\r\n            }\r\n        }\r\n    };\r\n    OptimizelyProvider.prototype.render = function () {\r\n        var _a = this.props, optimizely = _a.optimizely, children = _a.children, timeout = _a.timeout;\r\n        var isServerSide = !!this.props.isServerSide;\r\n        var value = {\r\n            optimizely: optimizely,\r\n            isServerSide: isServerSide,\r\n            timeout: timeout,\r\n        };\r\n        return (React.createElement(OptimizelyContextProvider, { value: value }, children));\r\n    };\r\n    return OptimizelyProvider;\r\n}(React.Component));\n\nfunction withOptimizely(Component) {\r\n    var WithOptimizely = /** @class */ (function (_super) {\r\n        __extends(WithOptimizely, _super);\r\n        function WithOptimizely() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        WithOptimizely.prototype.render = function () {\r\n            var _a = this.props, forwardedRef = _a.forwardedRef, rest = __rest(_a, [\"forwardedRef\"]);\r\n            // Note: Casting props to P is necessary because of this TypeScript issue:\r\n            // https://github.com/microsoft/TypeScript/issues/28884\r\n            return (React.createElement(OptimizelyContextConsumer, null, function (value) { return (React.createElement(Component, __assign({}, rest, { optimizelyReadyTimeout: value.timeout, optimizely: value.optimizely, isServerSide: value.isServerSide, ref: forwardedRef }))); }));\r\n        };\r\n        return WithOptimizely;\r\n    }(React.Component));\r\n    var withRefsForwarded = hoistStaticsAndForwardRefs(WithOptimizely, Component, 'withOptimizely');\r\n    return withRefsForwarded;\r\n}\n\n/**\r\n * Copyright 2019-2020, Optimizely\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar logger$1 = logging.getLogger('ReactSDK');\r\nvar REACT_SDK_CLIENT_ENGINE = 'react-sdk';\r\nvar REACT_SDK_CLIENT_VERSION = '1.1.0';\r\nvar DEFAULT_ON_READY_TIMEOUT = 5000;\r\nvar OptimizelyReactSDKClient = /** @class */ (function () {\r\n    /**\r\n     * Creates an instance of OptimizelyReactSDKClient.\r\n     * @param {optimizely.Config} [config={}]\r\n     */\r\n    function OptimizelyReactSDKClient(config) {\r\n        var _this = this;\r\n        this.user = {\r\n            id: null,\r\n            attributes: {},\r\n        };\r\n        this.isUserPromiseResolved = false;\r\n        this.onUserUpdateHandlers = [];\r\n        this.initialConfig = config;\r\n        this.userPromiseResovler = function () { };\r\n        var configWithClientInfo = __assign({}, config, { clientEngine: REACT_SDK_CLIENT_ENGINE, clientVersion: REACT_SDK_CLIENT_VERSION });\r\n        this._client = optimizely.createInstance(configWithClientInfo);\r\n        this.userPromise = new Promise(function (resolve) {\r\n            _this.userPromiseResovler = resolve;\r\n        }).then(function () { return ({ success: true }); });\r\n        this.dataReadyPromise = Promise.all([this.userPromise, this._client.onReady()]).then(function () {\r\n            return {\r\n                success: true,\r\n                reason: 'datafile and user resolved',\r\n            };\r\n        });\r\n    }\r\n    OptimizelyReactSDKClient.prototype.onReady = function (config) {\r\n        if (config === void 0) { config = {}; }\r\n        var timeoutId;\r\n        var timeout = DEFAULT_ON_READY_TIMEOUT;\r\n        if (config && config.timeout !== undefined) {\r\n            timeout = config.timeout;\r\n        }\r\n        var timeoutPromise = new Promise(function (resolve) {\r\n            timeoutId = setTimeout(function () {\r\n                resolve({\r\n                    success: false,\r\n                    reason: 'failed to initialize onReady before timeout, either the datafile or user info was not set before the timeout',\r\n                });\r\n            }, timeout);\r\n        });\r\n        return Promise.race([this.dataReadyPromise, timeoutPromise]).then(function (res) {\r\n            clearTimeout(timeoutId);\r\n            return res;\r\n        });\r\n    };\r\n    OptimizelyReactSDKClient.prototype.setUser = function (userInfo) {\r\n        var _this = this;\r\n        // TODO add check for valid user\r\n        if (userInfo.id) {\r\n            this.user.id = userInfo.id;\r\n        }\r\n        if (userInfo.attributes) {\r\n            this.user.attributes = userInfo.attributes;\r\n        }\r\n        if (!this.isUserPromiseResolved) {\r\n            this.userPromiseResovler(this.user);\r\n            this.isUserPromiseResolved = true;\r\n        }\r\n        this.onUserUpdateHandlers.forEach(function (handler) { return handler(_this.user); });\r\n    };\r\n    OptimizelyReactSDKClient.prototype.onUserUpdate = function (handler) {\r\n        var _this = this;\r\n        this.onUserUpdateHandlers.push(handler);\r\n        return function () {\r\n            var ind = _this.onUserUpdateHandlers.indexOf(handler);\r\n            if (ind > -1) {\r\n                _this.onUserUpdateHandlers.splice(ind, 1);\r\n            }\r\n        };\r\n    };\r\n    /**\r\n     * Buckets visitor and sends impression event to Optimizely\r\n     * @param {string} experimentKey\r\n     * @param {string} [overrideUserId]\r\n     * @param {optimizely.UserAttributes} [overrideAttributes]\r\n     * @returns {(string | null)}\r\n     * @memberof OptimizelyReactSDKClient\r\n     */\r\n    OptimizelyReactSDKClient.prototype.activate = function (experimentKey, overrideUserId, overrideAttributes) {\r\n        var user = this.getUserContextWithOverrides(overrideUserId, overrideAttributes);\r\n        if (user.id === null) {\r\n            logger$1.info('Not activating experiment \"%s\" because userId is not set', experimentKey);\r\n            return null;\r\n        }\r\n        return this._client.activate(experimentKey, user.id, user.attributes);\r\n    };\r\n    /**\r\n     * Gets variation where visitor will be bucketed\r\n     * @param {string} experimentKey\r\n     * @param {string} [overrideUserId]\r\n     * @param {optimizely.UserAttributes} [overrideAttributes]\r\n     * @returns {(string | null)}\r\n     * @memberof OptimizelyReactSDKClient\r\n     */\r\n    OptimizelyReactSDKClient.prototype.getVariation = function (experimentKey, overrideUserId, overrideAttributes) {\r\n        var user = this.getUserContextWithOverrides(overrideUserId, overrideAttributes);\r\n        if (user.id === null) {\r\n            logger$1.info('getVariation returned null for experiment \"%s\" because userId is not set', experimentKey);\r\n            return null;\r\n        }\r\n        return this._client.getVariation(experimentKey, user.id, user.attributes);\r\n    };\r\n    /**\r\n     * Sends conversion event to Optimizely\r\n     * @param {string} eventKey\r\n     * @param {string} [overrideUserId]\r\n     * @param {optimizely.UserAttributes} [overrideAttributes]\r\n     * @param {optimizely.EventTags} [eventTags]\r\n     * @memberof OptimizelyReactSDKClient\r\n     */\r\n    OptimizelyReactSDKClient.prototype.track = function (eventKey, overrideUserId, overrideAttributes, eventTags) {\r\n        if (typeof overrideUserId !== 'undefined' && typeof overrideUserId !== 'string') {\r\n            eventTags = overrideUserId;\r\n            overrideUserId = undefined;\r\n            overrideAttributes = undefined;\r\n        }\r\n        var user = this.getUserContextWithOverrides(overrideUserId, overrideAttributes);\r\n        if (user.id === null) {\r\n            logger$1.info('track for event \"%s\" not being sent because userId is not set', eventKey);\r\n            return;\r\n        }\r\n        return this._client.track(eventKey, user.id, user.attributes, eventTags);\r\n    };\r\n    /**\r\n     * Returns true if the feature is enabled for the given user\r\n     * @param {string} feature\r\n     * @param {string} [overrideUserId]\r\n     * @param {optimizely.UserAttributes} [overrideAttributes]\r\n     * @returns {boolean}\r\n     * @memberof OptimizelyReactSDKClient\r\n     */\r\n    OptimizelyReactSDKClient.prototype.isFeatureEnabled = function (feature, overrideUserId, overrideAttributes) {\r\n        var user = this.getUserContextWithOverrides(overrideUserId, overrideAttributes);\r\n        if (user.id === null) {\r\n            logger$1.info('isFeatureEnabled returning false for feature \"%s\" because userId is not set', feature);\r\n            return false;\r\n        }\r\n        return this._client.isFeatureEnabled(feature, user.id, user.attributes);\r\n    };\r\n    /**\r\n     * Get all variables for a feature, regardless of the feature being enabled/disabled\r\n     * @param {string} feature\r\n     * @param {string} [overrideUserId]\r\n     * @param {optimizely.UserAttributes} [overrideAttributes]\r\n     * @returns {VariableValuesObject}\r\n     * @memberof OptimizelyReactSDKClient\r\n     */\r\n    OptimizelyReactSDKClient.prototype.getFeatureVariables = function (featureKey, overrideUserId, overrideAttributes) {\r\n        var _this = this;\r\n        var user = this.getUserContextWithOverrides(overrideUserId, overrideAttributes);\r\n        var userId = user.id;\r\n        if (userId === null) {\r\n            logger$1.info('getFeatureVariables returning `{}` for feature \"%s\" because userId is not set', featureKey);\r\n            return {};\r\n        }\r\n        var userAttributes = user.attributes;\r\n        var variableObj = {};\r\n        var config = this._client.projectConfigManager.getConfig();\r\n        if (!config) {\r\n            return {};\r\n        }\r\n        var feature = config.featureKeyMap[featureKey];\r\n        if (!feature) {\r\n            return {};\r\n        }\r\n        var variables = feature.variables;\r\n        variables.forEach(function (variableDef) {\r\n            var type = variableDef.type;\r\n            var key = variableDef.key;\r\n            switch (type) {\r\n                case 'string':\r\n                    variableObj[key] = _this._client.getFeatureVariableString(featureKey, key, userId, userAttributes);\r\n                    break;\r\n                case 'boolean':\r\n                    variableObj[key] = _this._client.getFeatureVariableBoolean(featureKey, key, userId, userAttributes);\r\n                    break;\r\n                case 'integer':\r\n                    variableObj[key] = _this._client.getFeatureVariableInteger(featureKey, key, userId, userAttributes);\r\n                    break;\r\n                case 'double':\r\n                    variableObj[key] = _this._client.getFeatureVariableDouble(featureKey, key, userId, userAttributes);\r\n                    break;\r\n            }\r\n        });\r\n        return variableObj;\r\n    };\r\n    /**\r\n     * Returns value for the given string variable attached to the given feature\r\n     * flag\r\n     * @param {string} feature\r\n     * @param {string} variable\r\n     * @param {string} [overrideUserId]\r\n     * @param {optimizely.UserAttributes} [overrideAttributes]\r\n     * @returns {(string | null)}\r\n     * @memberof OptimizelyReactSDKClient\r\n     */\r\n    OptimizelyReactSDKClient.prototype.getFeatureVariableString = function (feature, variable, overrideUserId, overrideAttributes) {\r\n        var user = this.getUserContextWithOverrides(overrideUserId, overrideAttributes);\r\n        if (user.id === null) {\r\n            return null;\r\n        }\r\n        return this._client.getFeatureVariableString(feature, variable, user.id, user.attributes);\r\n    };\r\n    /**\r\n     * Returns value for the given boolean variable attached to the given feature\r\n     * flag\r\n     * @param {string} feature\r\n     * @param {string} variable\r\n     * @param {string} [overrideUserId]\r\n     * @param {optimizely.UserAttributes} [overrideAttributes]\r\n     * @returns {(string | null)}\r\n     * @memberof OptimizelyReactSDKClient\r\n     */\r\n    OptimizelyReactSDKClient.prototype.getFeatureVariableBoolean = function (feature, variable, overrideUserId, overrideAttributes) {\r\n        var user = this.getUserContextWithOverrides(overrideUserId, overrideAttributes);\r\n        if (user.id === null) {\r\n            return null;\r\n        }\r\n        return this._client.getFeatureVariableBoolean(feature, variable, user.id, user.attributes);\r\n    };\r\n    /**\r\n     * Returns value for the given integer variable attached to the given feature\r\n     * flag\r\n     * @param {string} feature\r\n     * @param {string} variable\r\n     * @param {string} [overrideUserId]\r\n     * @param {optimizely.UserAttributes} [overrideAttributes]\r\n     * @returns {(string | null)}\r\n     * @memberof OptimizelyReactSDKClient\r\n     */\r\n    OptimizelyReactSDKClient.prototype.getFeatureVariableInteger = function (feature, variable, overrideUserId, overrideAttributes) {\r\n        var user = this.getUserContextWithOverrides(overrideUserId, overrideAttributes);\r\n        if (user.id === null) {\r\n            return null;\r\n        }\r\n        return this._client.getFeatureVariableInteger(feature, variable, user.id, user.attributes);\r\n    };\r\n    /**\r\n     * Returns value for the given double variable attached to the given feature\r\n     * flag\r\n     * @param {string} feature\r\n     * @param {string} variable\r\n     * @param {string} [overrideUserId]\r\n     * @param {optimizely.UserAttributes} [overrideAttributes]\r\n     * @returns {(string | null)}\r\n     * @memberof OptimizelyReactSDKClient\r\n     */\r\n    OptimizelyReactSDKClient.prototype.getFeatureVariableDouble = function (feature, variable, overrideUserId, overrideAttributes) {\r\n        var user = this.getUserContextWithOverrides(overrideUserId, overrideAttributes);\r\n        if (user.id === null) {\r\n            return null;\r\n        }\r\n        return this._client.getFeatureVariableDouble(feature, variable, user.id, user.attributes);\r\n    };\r\n    /**\r\n     * Get an array of all enabled features\r\n     * @param {string} [overrideUserId]\r\n     * @param {optimizely.UserAttributes} [overrideUserId]\r\n     * @returns {Array<string>}\r\n     * @memberof OptimizelyReactSDKClient\r\n     */\r\n    OptimizelyReactSDKClient.prototype.getEnabledFeatures = function (overrideUserId, overrideAttributes) {\r\n        var user = this.getUserContextWithOverrides(overrideUserId, overrideAttributes);\r\n        if (user.id === null) {\r\n            return [];\r\n        }\r\n        return this._client.getEnabledFeatures(user.id, user.attributes);\r\n    };\r\n    /**\r\n     * Gets the forced variation for a given user and experiment\r\n     * @param {string} experiment\r\n     * @param {string} [overrideUserId]\r\n     * @returns {(string | null)}\r\n     * @memberof OptimizelyReactSDKClient\r\n     */\r\n    OptimizelyReactSDKClient.prototype.getForcedVariation = function (experiment, overrideUserId) {\r\n        var user = this.getUserContextWithOverrides(overrideUserId);\r\n        if (user.id === null) {\r\n            return null;\r\n        }\r\n        return this._client.getForcedVariation(experiment, user.id);\r\n    };\r\n    /**\r\n     * Force a user into a variation for a given experiment\r\n     * @param {string} experiment\r\n     * @param {string} overrideUserIdOrVariationKey\r\n     * @param {string} [variationKey]\r\n     * @returns {boolean}\r\n     * @memberof OptimizelyReactSDKClient\r\n     */\r\n    OptimizelyReactSDKClient.prototype.setForcedVariation = function (experiment, overrideUserIdOrVariationKey, variationKey) {\r\n        var finalUserId = null;\r\n        var finalVariationKey = null;\r\n        if (arguments.length === 2) {\r\n            finalVariationKey = overrideUserIdOrVariationKey;\r\n            finalUserId = this.getUserContextWithOverrides().id;\r\n        }\r\n        else if (arguments.length === 3) {\r\n            finalUserId = this.getUserContextWithOverrides(overrideUserIdOrVariationKey).id;\r\n            if (variationKey === undefined) {\r\n                // can't have undefined if supplying all 3 arguments\r\n                return false;\r\n            }\r\n            finalVariationKey = variationKey;\r\n        }\r\n        if (finalUserId === null) {\r\n            return false;\r\n        }\r\n        return this._client.setForcedVariation(experiment, finalUserId, finalVariationKey);\r\n    };\r\n    /**\r\n     *  Returns OptimizelyConfig object containing experiments and features data\r\n     *  @returns {optimizely.OptimizelyConfig | null} optimizely config\r\n     */\r\n    OptimizelyReactSDKClient.prototype.getOptimizelyConfig = function () {\r\n        return this._client.getOptimizelyConfig();\r\n    };\r\n    /**\r\n     * Cleanup method for killing an running timers and flushing eventQueue\r\n     */\r\n    OptimizelyReactSDKClient.prototype.close = function () {\r\n        return this._client.close();\r\n    };\r\n    Object.defineProperty(OptimizelyReactSDKClient.prototype, \"client\", {\r\n        /**\r\n         * Provide access to inner optimizely.Client object\r\n         */\r\n        get: function () {\r\n            return this._client;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(OptimizelyReactSDKClient.prototype, \"notificationCenter\", {\r\n        get: function () {\r\n            return this._client.notificationCenter;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    OptimizelyReactSDKClient.prototype.getUserContextWithOverrides = function (overrideUserId, overrideAttributes) {\r\n        var finalUserId = overrideUserId === undefined ? this.user.id : overrideUserId;\r\n        var finalUserAttributes = overrideAttributes === undefined ? this.user.attributes : overrideAttributes;\r\n        return {\r\n            id: finalUserId,\r\n            attributes: finalUserAttributes,\r\n        };\r\n    };\r\n    return OptimizelyReactSDKClient;\r\n}());\r\nfunction createInstance(config) {\r\n    return new OptimizelyReactSDKClient(config);\r\n}\n\nvar logger$2 = logging.getLogger('<OptimizelyFeature>');\r\nvar FeatureComponent = /** @class */ (function (_super) {\r\n    __extends(FeatureComponent, _super);\r\n    function FeatureComponent(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.autoUpdate = false;\r\n        _this.unregisterUserListener = function () { };\r\n        var autoUpdate = props.autoUpdate, isServerSide = props.isServerSide, optimizely = props.optimizely, feature = props.feature;\r\n        _this.autoUpdate = !!autoUpdate;\r\n        if (isServerSide) {\r\n            if (optimizely === null) {\r\n                throw new Error('optimizely prop must be supplied');\r\n            }\r\n            var isEnabled = optimizely.isFeatureEnabled(feature);\r\n            var variables = optimizely.getFeatureVariables(feature);\r\n            _this.state = {\r\n                canRender: true,\r\n                isEnabled: isEnabled,\r\n                variables: variables,\r\n            };\r\n        }\r\n        else {\r\n            _this.state = {\r\n                canRender: false,\r\n                isEnabled: false,\r\n                variables: {},\r\n            };\r\n        }\r\n        return _this;\r\n    }\r\n    FeatureComponent.prototype.componentDidMount = function () {\r\n        var _this = this;\r\n        var _a = this.props, feature = _a.feature, optimizely = _a.optimizely, optimizelyReadyTimeout = _a.optimizelyReadyTimeout, isServerSide = _a.isServerSide, timeout = _a.timeout;\r\n        if (optimizely === null) {\r\n            throw new Error('optimizely prop must be supplied');\r\n        }\r\n        if (isServerSide) {\r\n            return;\r\n        }\r\n        // allow overriding of the ready timeout via the `timeout` prop passed to <Experiment />\r\n        var finalReadyTimeout = timeout !== undefined ? timeout : optimizelyReadyTimeout;\r\n        optimizely.onReady({ timeout: finalReadyTimeout }).then(function (res) {\r\n            if (res.success) {\r\n                logger$2.info('feature=\"%s\" successfully rendered for user=\"%s\"', feature, optimizely.user.id);\r\n            }\r\n            else {\r\n                logger$2.info('feature=\"%s\" could not be checked before timeout of %sms, reason=\"%s\" ', feature, timeout === undefined ? DEFAULT_ON_READY_TIMEOUT : timeout, res.reason || '');\r\n            }\r\n            var isEnabled = optimizely.isFeatureEnabled(feature);\r\n            var variables = optimizely.getFeatureVariables(feature);\r\n            _this.setState({\r\n                canRender: true,\r\n                isEnabled: isEnabled,\r\n                variables: variables,\r\n            });\r\n            if (_this.autoUpdate) {\r\n                _this.setupAutoUpdateListeners();\r\n            }\r\n        });\r\n    };\r\n    FeatureComponent.prototype.setupAutoUpdateListeners = function () {\r\n        var _this = this;\r\n        var _a = this.props, optimizely = _a.optimizely, feature = _a.feature;\r\n        if (optimizely === null) {\r\n            return;\r\n        }\r\n        this.optimizelyNotificationId = optimizely.notificationCenter.addNotificationListener('OPTIMIZELY_CONFIG_UPDATE', function () {\r\n            logger$2.info('OPTIMIZELY_CONFIG_UPDATE, re-evaluating feature=\"%s\" for user=\"%s\"', feature, optimizely.user.id);\r\n            var isEnabled = optimizely.isFeatureEnabled(feature);\r\n            var variables = optimizely.getFeatureVariables(feature);\r\n            _this.setState({\r\n                isEnabled: isEnabled,\r\n                variables: variables,\r\n            });\r\n        });\r\n        this.unregisterUserListener = optimizely.onUserUpdate(function () {\r\n            logger$2.info('User update, re-evaluating feature=\"%s\" for user=\"%s\"', feature, optimizely.user.id);\r\n            var isEnabled = optimizely.isFeatureEnabled(feature);\r\n            var variables = optimizely.getFeatureVariables(feature);\r\n            _this.setState({\r\n                isEnabled: isEnabled,\r\n                variables: variables,\r\n            });\r\n        });\r\n    };\r\n    FeatureComponent.prototype.componentWillUnmount = function () {\r\n        var _a = this.props, optimizely = _a.optimizely, isServerSide = _a.isServerSide;\r\n        if (isServerSide || !this.autoUpdate) {\r\n            return;\r\n        }\r\n        if (optimizely && this.optimizelyNotificationId) {\r\n            optimizely.notificationCenter.removeNotificationListener(this.optimizelyNotificationId);\r\n        }\r\n        this.unregisterUserListener();\r\n    };\r\n    FeatureComponent.prototype.render = function () {\r\n        var children = this.props.children;\r\n        var _a = this.state, isEnabled = _a.isEnabled, variables = _a.variables, canRender = _a.canRender;\r\n        if (!canRender) {\r\n            return null;\r\n        }\r\n        return children(isEnabled, variables);\r\n    };\r\n    return FeatureComponent;\r\n}(React.Component));\r\nvar OptimizelyFeature = withOptimizely(FeatureComponent);\n\nvar logger$3 = logging.getLogger('<OptimizelyExperiment>');\r\nvar Experiment = /** @class */ (function (_super) {\r\n    __extends(Experiment, _super);\r\n    function Experiment(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.unregisterUserListener = function () { };\r\n        _this.autoUpdate = false;\r\n        var autoUpdate = props.autoUpdate, isServerSide = props.isServerSide, optimizely = props.optimizely, experiment = props.experiment;\r\n        _this.autoUpdate = !!autoUpdate;\r\n        if (isServerSide) {\r\n            if (optimizely === null) {\r\n                throw new Error('optimizely prop must be supplied');\r\n            }\r\n            var variation = optimizely.activate(experiment);\r\n            _this.state = {\r\n                canRender: true,\r\n                variation: variation,\r\n            };\r\n        }\r\n        else {\r\n            _this.state = {\r\n                canRender: false,\r\n                variation: null,\r\n            };\r\n        }\r\n        return _this;\r\n    }\r\n    Experiment.prototype.componentDidMount = function () {\r\n        var _this = this;\r\n        var _a = this.props, experiment = _a.experiment, optimizely = _a.optimizely, optimizelyReadyTimeout = _a.optimizelyReadyTimeout, isServerSide = _a.isServerSide, timeout = _a.timeout;\r\n        if (!optimizely) {\r\n            throw new Error('optimizely prop must be supplied');\r\n        }\r\n        if (isServerSide) {\r\n            return;\r\n        }\r\n        // allow overriding of the ready timeout via the `timeout` prop passed to <Experiment />\r\n        var finalReadyTimeout = timeout !== undefined ? timeout : optimizelyReadyTimeout;\r\n        optimizely.onReady({ timeout: finalReadyTimeout }).then(function (res) {\r\n            if (res.success) {\r\n                logger$3.info('experiment=\"%s\" successfully rendered for user=\"%s\"', experiment, optimizely.user.id);\r\n            }\r\n            else {\r\n                logger$3.info('experiment=\"%s\" could not be checked before timeout of %sms, reason=\"%s\" ', experiment, timeout === undefined ? DEFAULT_ON_READY_TIMEOUT : timeout, res.reason || '');\r\n            }\r\n            var variation = optimizely.activate(experiment);\r\n            _this.setState({\r\n                canRender: true,\r\n                variation: variation,\r\n            });\r\n            if (_this.autoUpdate) {\r\n                _this.setupAutoUpdateListeners();\r\n            }\r\n        });\r\n    };\r\n    Experiment.prototype.setupAutoUpdateListeners = function () {\r\n        var _this = this;\r\n        var _a = this.props, optimizely = _a.optimizely, experiment = _a.experiment;\r\n        if (optimizely === null) {\r\n            return;\r\n        }\r\n        this.optimizelyNotificationId = optimizely.notificationCenter.addNotificationListener('OPTIMIZELY_CONFIG_UPDATE', function () {\r\n            logger$3.info('OPTIMIZELY_CONFIG_UPDATE, re-evaluating experiment=\"%s\" for user=\"%s\"', experiment, optimizely.user.id);\r\n            var variation = optimizely.activate(experiment);\r\n            _this.setState({\r\n                variation: variation,\r\n            });\r\n        });\r\n        this.unregisterUserListener = optimizely.onUserUpdate(function () {\r\n            logger$3.info('User update, re-evaluating experiment=\"%s\" for user=\"%s\"', experiment, optimizely.user.id);\r\n            var variation = optimizely.activate(experiment);\r\n            _this.setState({\r\n                variation: variation,\r\n            });\r\n        });\r\n    };\r\n    Experiment.prototype.componentWillUnmount = function () {\r\n        var _a = this.props, optimizely = _a.optimizely, isServerSide = _a.isServerSide;\r\n        if (isServerSide || !this.autoUpdate) {\r\n            return;\r\n        }\r\n        if (optimizely && this.optimizelyNotificationId) {\r\n            optimizely.notificationCenter.removeNotificationListener(this.optimizelyNotificationId);\r\n        }\r\n        this.unregisterUserListener();\r\n    };\r\n    Experiment.prototype.render = function () {\r\n        var children = this.props.children;\r\n        var _a = this.state, variation = _a.variation, canRender = _a.canRender;\r\n        if (!canRender) {\r\n            return null;\r\n        }\r\n        if (children != null && typeof children === 'function') {\r\n            return children(variation);\r\n        }\r\n        var match = null;\r\n        // We use React.Children.forEach instead of React.Children.toArray().find()\r\n        // here because toArray adds keys to all child elements and we do not want\r\n        // to trigger an unmount/remount\r\n        React.Children.forEach(this.props.children, function (child) {\r\n            if (match || !React.isValidElement(child)) {\r\n                return;\r\n            }\r\n            if (child.props.variation) {\r\n                if (variation === child.props.variation) {\r\n                    match = child;\r\n                }\r\n            }\r\n            else if (child.props.default) {\r\n                match = child;\r\n            }\r\n        });\r\n        return match ? React.cloneElement(match, { variation: variation }) : null;\r\n    };\r\n    return Experiment;\r\n}(React.Component));\r\nvar OptimizelyExperiment = withOptimizely(Experiment);\n\nvar Variation = /** @class */ (function (_super) {\r\n    __extends(Variation, _super);\r\n    function Variation() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Variation.prototype.render = function () {\r\n        return this.props.children;\r\n    };\r\n    return Variation;\r\n}(React.Component));\r\nvar OptimizelyVariation = Variation;\n\n/**\r\n * Copyright 2019, Optimizely\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar logger$4 = logging.getLogger('ReactSDK');\r\n/**\r\n * logOnlyEventDispatcher only logs a message at the debug level, and does not\r\n * send any requests to the Optimizely results backend. Use this to disable\r\n * all event dispatching.\r\n */\r\nvar logOnlyEventDispatcher = {\r\n    dispatchEvent: function (event, callback) {\r\n        logger$4.debug('Event not dispatched by disabled event dispatcher: %s', function () {\r\n            var eventStr;\r\n            try {\r\n                eventStr = JSON.stringify(event);\r\n            }\r\n            catch (err) {\r\n                eventStr = 'error stringifying event';\r\n            }\r\n            return eventStr;\r\n        });\r\n    }\r\n};\n\n/**\r\n * Copyright 2018-2019, Optimizely\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nObject.defineProperty(exports, 'enums', {\n  enumerable: true,\n  get: function () {\n    return optimizely.enums;\n  }\n});\nObject.defineProperty(exports, 'errorHandler', {\n  enumerable: true,\n  get: function () {\n    return optimizely.errorHandler;\n  }\n});\nObject.defineProperty(exports, 'eventDispatcher', {\n  enumerable: true,\n  get: function () {\n    return optimizely.eventDispatcher;\n  }\n});\nObject.defineProperty(exports, 'logging', {\n  enumerable: true,\n  get: function () {\n    return optimizely.logging;\n  }\n});\nObject.defineProperty(exports, 'setLogLevel', {\n  enumerable: true,\n  get: function () {\n    return optimizely.setLogLevel;\n  }\n});\nObject.defineProperty(exports, 'setLogger', {\n  enumerable: true,\n  get: function () {\n    return optimizely.setLogger;\n  }\n});\nexports.OptimizelyContextConsumer = OptimizelyContextConsumer;\nexports.OptimizelyContextProvider = OptimizelyContextProvider;\nexports.OptimizelyExperiment = OptimizelyExperiment;\nexports.OptimizelyFeature = OptimizelyFeature;\nexports.OptimizelyProvider = OptimizelyProvider;\nexports.OptimizelyVariation = OptimizelyVariation;\nexports.createInstance = createInstance;\nexports.logOnlyEventDispatcher = logOnlyEventDispatcher;\nexports.withOptimizely = withOptimizely;\n"]},"metadata":{},"sourceType":"script"}